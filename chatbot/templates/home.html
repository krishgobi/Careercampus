{% extends 'base.html' %}

{% block title %}Upload Documents - Smart Campus Assistant{% endblock %}

{% block content %}
<div class="upload-page">
    <div class="page-header">
        <h1><i class="fas fa-cloud-upload-alt"></i> Upload Course Materials</h1>
        <p>Drag and drop your PDFs, Word documents, or PowerPoint presentations</p>
    </div>

    <div class="upload-section">
        <div class="drop-zone" id="dropZone">
            <i class="fas fa-file-upload"></i>
            <h3>Drag & Drop Files Here</h3>
            <p>or click to browse</p>
            <input type="file" id="fileInput" multiple accept=".pdf,.docx,.pptx" hidden>
            <button class="btn-primary" onclick="document.getElementById('fileInput').click()">
                <i class="fas fa-folder-open"></i> Browse Files
            </button>
        </div>

        <div class="file-list" id="fileList">
            <!-- Files will be added here dynamically -->
        </div>

        <div class="upload-progress" id="uploadProgress" style="display: none;">
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill"></div>
            </div>
            <p class="progress-text" id="progressText">Uploading files...</p>
        </div>
    </div>

    <div class="documents-grid">
        <h2><i class="fas fa-folder"></i> Uploaded Documents</h2>
        <div class="documents-list" id="documentsList">
            {% for doc in documents %}
            <div class="document-card">
                <div class="doc-icon">
                    {% if doc.file_type == 'pdf' %}
                    <i class="fas fa-file-pdf"></i>
                    {% elif doc.file_type == 'docx' %}
                    <i class="fas fa-file-word"></i>
                    {% elif doc.file_type == 'pptx' %}
                    <i class="fas fa-file-powerpoint"></i>
                    {% endif %}
                </div>
                <div class="doc-info">
                    <h4>{{ doc.title }}</h4>
                    <p>{{ doc.uploaded_at|date:"M d, Y H:i" }}</p>
                </div>
            </div>
            {% empty %}
            <p class="empty-state">No documents uploaded yet. Start by uploading your course materials!</p>
            {% endfor %}
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
{% load static %}
<script src="{% static 'js/upload.js' %}"></script>
{% endblock %}