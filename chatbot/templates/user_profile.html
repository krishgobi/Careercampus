{% extends 'base.html' %}
{% load static %}

{% block title %}My Profile - கற்றல் AI{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/profile.css' %}">
{% endblock %}

{% block content %}
<div class="profile-wrapper">
    <div class="profile-card">
        <!-- User Info -->
        <div class="user-section">
            <div class="avatar">
                {{ user.first_name|slice:":1"|upper }}{{ user.last_name|slice:":1"|upper }}
            </div>
            <div class="user-details">
                <h1 id="display-name">{{ user.first_name }} {{ user.last_name }}</h1>
                <p id="display-email">{{ user.email }}</p>
            </div>
            <button class="btn-edit" onclick="openEditModal()">
                <i class="fas fa-edit"></i>
            </button>
        </div>

        <!-- Activity Stats -->
        <div class="stats-section">
            <h2>Activity Summary</h2>
            <div class="stats">
                <div class="stat">
                    <i class="fas fa-file-alt"></i>
                    <span class="number">{{ stats.total_question_papers }}</span>
                    <span class="label">Papers Generated</span>
                </div>
                <div class="stat">
                    <i class="fas fa-upload"></i>
                    <span class="number">{{ stats.total_documents }}</span>
                    <span class="label">Documents Uploaded</span>
                </div>
                <div class="stat">
                    <i class="fas fa-comments"></i>
                    <span class="number">{{ stats.total_chats }}</span>
                    <span class="label">Conversations</span>
                </div>
                <div class="stat">
                    <i class="fas fa-brain"></i>
                    <span class="number">{{ stats.total_learning_items }}</span>
                    <span class="label">Learning Items</span>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Edit Modal -->
<div class="modal" id="edit-modal">
    <div class="modal-box">
        <h2>Edit Profile</h2>
        <div class="form">
            <div class="field">
                <label>First Name</label>
                <input type="text" id="first-name" value="{{ user.first_name }}">
            </div>
            <div class="field">
                <label>Last Name</label>
                <input type="text" id="last-name" value="{{ user.last_name }}">
            </div>
            <div class="field">
                <label>Email</label>
                <input type="email" id="email" value="{{ user.email }}">
            </div>
            <div class="buttons">
                <button class="btn-cancel" onclick="closeEditModal()">Cancel</button>
                <button class="btn-save" onclick="saveProfile()">Save</button>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script src="{% static 'js/profile.js' %}"></script>
{% endblock %}